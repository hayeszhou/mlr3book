<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Performance Evaluation and Comparison | mlr3 book</title>
<meta name="author" content="Marc Becker">
<meta name="author" content="Martin Binder">
<meta name="author" content="Bernd Bischl">
<meta name="author" content="Lars Kotthoff">
<meta name="author" content="Michel Lang">
<meta name="author" content="Florian Pfisterer">
<meta name="author" content="Nicholas G. Reich">
<meta name="author" content="Jakob Richter">
<meta name="author" content="Patrick Schratz">
<meta name="author" content="Raphael Sonabend">
<meta name="author" content="Damir Pulatov">
<meta name="description" content="Now that we are familiar with the basics of how to create tasks and learners, how to fit models, and do some basic performance evaluation, let’s have a look at some of the details, and in...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="3 Performance Evaluation and Comparison | mlr3 book">
<meta property="og:type" content="book">
<meta property="og:url" content="https://mlr3book.mlr-org.com/perf-eval-cmp.html">
<meta property="og:image" content="https://mlr3book.mlr-org.com//block.png">
<meta property="og:description" content="Now that we are familiar with the basics of how to create tasks and learners, how to fit models, and do some basic performance evaluation, let’s have a look at some of the details, and in...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Performance Evaluation and Comparison | mlr3 book">
<meta name="twitter:description" content="Now that we are familiar with the basics of how to create tasks and learners, how to fit models, and do some basic performance evaluation, let’s have a look at some of the details, and in...">
<meta name="twitter:image" content="https://mlr3book.mlr-org.com//block.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">mlr3 book</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Quickstart</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction and Overview</a></li>
<li><a class="" href="basics.html"><span class="header-section-number">2</span> Basics</a></li>
<li><a class="active" href="perf-eval-cmp.html"><span class="header-section-number">3</span> Performance Evaluation and Comparison</a></li>
<li><a class="" href="optimization.html"><span class="header-section-number">4</span> Model Optimization</a></li>
<li><a class="" href="pipelines.html"><span class="header-section-number">5</span> Pipelines</a></li>
<li><a class="" href="technical.html"><span class="header-section-number">6</span> Technical</a></li>
<li><a class="" href="extending.html"><span class="header-section-number">7</span> Extending</a></li>
<li><a class="" href="special-tasks.html"><span class="header-section-number">8</span> Special Tasks</a></li>
<li><a class="" href="interpretation.html"><span class="header-section-number">9</span> Model Interpretation</a></li>
<li><a class="" href="appendix.html"><span class="header-section-number">10</span> Appendix</a></li>
<li><a class="" href="citation-info.html">Citation Info</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/mlr-org/mlr3book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="perf-eval-cmp" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Performance Evaluation and Comparison<a class="anchor" aria-label="anchor" href="#perf-eval-cmp"><i class="fas fa-link"></i></a>
</h1>
<p>Now that we are familiar with the basics of how to create tasks and learners, how to fit models, and do some basic performance evaluation, let’s have a look at some of the details, and in particular how <a href="https://mlr3.mlr-org.com">mlr3</a> makes it easy to perform many common machine learning steps.</p>
<p>We will cover the following topics:</p>
<p><strong>Binary classification and ROC curves</strong></p>
<p><a href="basics.html#binary-classification">Binary classification</a> is a special case of classification where the target variable to predict has only two possible values.
In this case, additional considerations apply; in particular <a href="perf-eval-cmp.html#binary-roc">ROC curves</a> and the threshold of where to predict one class versus the other.</p>
<p><strong>Resampling</strong></p>
<p>A <a href="perf-eval-cmp.html#resampling">resampling</a> is a method to create training and test splits.
We cover how to</p>
<ul>
<li>access and select <a href="perf-eval-cmp.html#resampling-settings">resampling strategies</a>,</li>
<li>instantiate the <a href="perf-eval-cmp.html#resampling-inst">split into training and test sets</a> by applying the resampling, and</li>
<li>execute the resampling to obtain <a href="perf-eval-cmp.html#resampling-exec">results</a>.</li>
</ul>
<p>Additional information on resampling can be found in the section about <a href="optimization.html#nested-resampling">nested resampling</a> and in the chapter on <a href="optimization.html#optimization">model optimization</a>.</p>
<p><strong>Benchmarking</strong></p>
<p><a href="perf-eval-cmp.html#benchmarking">Benchmarking</a> is used to compare the performance of different models, for example models trained with different learners, on different tasks, or with different resampling methods.
This is usually done to get an overview of how different methods perform across different tasks.
We cover how to</p>
<ul>
<li>create a <a href="perf-eval-cmp.html#bm-design">benchmarking design</a>,</li>
<li>
<a href="perf-eval-cmp.html#bm-exec">execute a design</a> and aggregate results, and</li>
<li>
<a href="perf-eval-cmp.html#bm-resamp">convert benchmarking objects</a> to other types of objects that can be used for different purposes.</li>
</ul>
<div id="binary-roc" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> ROC Curve and Thresholds<a class="anchor" aria-label="anchor" href="#binary-roc"><i class="fas fa-link"></i></a>
</h2>
<p>As we have seen before, binary classification is special because of the presence of a positive and negative class and a threshold probability to ditinguish between the two.
ROC Analysis, which stands for receiver operating characteristics, applies specifically to this case and allows to get a better picture of the trade offs when choosing between the two classes.
We saw earlier that one can retrieve the confusion matrix of a <a href="https://mlr3.mlr-org.com/reference/Prediction.html"><code>Prediction</code></a> by accessing the <code>$confusion</code> field:</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"Sonar"</span>, package <span class="op">=</span> <span class="st">"mlbench"</span><span class="op">)</span>
<span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/as_task_classif.html">as_task_classif</a></span><span class="op">(</span><span class="va">Sonar</span>, target <span class="op">=</span> <span class="st">"Class"</span>, positive <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span>

<span class="va">learner</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span>, predict_type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span>
<span class="va">pred</span> <span class="op">=</span> <span class="va">learner</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">task</span><span class="op">)</span>
<span class="va">C</span> <span class="op">=</span> <span class="va">pred</span><span class="op">$</span><span class="va">confusion</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">C</span><span class="op">)</span></code></pre></div>
<pre><code>##         truth
## response  M  R
##        M 95 10
##        R 16 87</code></pre>
<p>The upper left quandrant denotes the number of times our model predicted the positive class and was correct about it.
Similarly, the lower right quadrant denotes the number of times our model predicted the negative class and was also correct about it.
Together, the elements on the diagonal are called True Positives (TP) and True Negatives (TN).
The upper right quadrant denotes the number of times we falsely predicted a positive label, and is called False Positives (FP).
The lower left quadrant is called False Negatives (FN).</p>
<p>We can derive the following performance metrics from the confusion matrix:</p>
<ul>
<li>
<strong>True Positive Rate (TPR)</strong>: How many of the true positives did we predict as positive?</li>
<li>
<strong>True Negative Rate (TNR)</strong>: How many of the true negatives did we predict as negative?</li>
<li>
<strong>Positive Predictive Value PPV</strong>: If we predict positive how likely is it a true positive?</li>
<li>
<strong>Negative Predictive Value NPV</strong>: If we predict negative how likely is it a true negative?</li>
</ul>
<p>It is difficult to achieve a high TPR and low FPR at the same time.
We can characterize the behavior of a binary classifier for different thresholds by plotting the TPR and FPR values – this is the ROC curve.
The best classifier lies on the top-left corner – the TPR is 1 and the FPR is 0.
The worst classifier lies at the diagonal.
Classifiers on the diagonal produce labels essentially randomly (possibly with different proportions).
For example, if each positive <span class="math inline">\(x\)</span> will be randomly classified with 25% as “positive”, we get a TPR of 0.25.
If we assign each negative <span class="math inline">\(x\)</span> randomly to “positive” we get a FPR of 0.25.
In practice, we should never obtain a classifier below the diagonal – ROC curves for different labels are symmetric with respect to the diagonal, so a curve below the diagonal would indicate that the positive and negative class labels have been switched by the classifier.</p>
<p>For <code>mlr3</code> prediction objects, the ROC curve can easily be created with <a href="https://mlr3viz.mlr-org.com">mlr3viz</a> which relies on the <a href="https://cran.r-project.org/package=precrec">precrec</a> to calculate and plot ROC curves:</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3viz.mlr-org.com">"mlr3viz"</a></span><span class="op">)</span>

<span class="co"># TPR vs FPR / Sensitivity vs (1 - Specificity)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">pred</span>, type <span class="op">=</span> <span class="st">"roc"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-binary_files/figure-html/binary-roc-1-1.svg" width="672" style="display: block; margin: auto;"></div>
<p>We can also plot the precision-recall curve (PPV vs. TPR).
The main difference between ROC curves and precision-recall curves (PRC) is that the number of true-negative results is not used for making a PRC.
PRCs are preferred over ROC curves for imbalanced populations.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Precision vs Recall</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">pred</span>, type <span class="op">=</span> <span class="st">"prc"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-binary_files/figure-html/binary-roc-2-1.svg" width="672" style="display: block; margin: auto;"></div>

</div>
<div id="resampling" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Resampling<a class="anchor" aria-label="anchor" href="#resampling"><i class="fas fa-link"></i></a>
</h2>
<p>When evaluating the performance of a model, we are interested in its generalization performance – how well will it perform on new data that has not been seen during training?
We can estimate the generalization performance by evaluating a model on a test set, as we have done above, that was created to contain only observations that are not contained in the training set.
There are many different strategies for partitioning a data set into training and test; in <code>mlr3</code> we call these strategies “resampling”.
<code>mlr3</code> includes the following predefined <a href="perf-eval-cmp.html#resampling">resampling</a> strategies:</p>
<ul>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_cv.html"><code>cross validation</code></a> (<code>"cv"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_loo.html"><code>leave-one-out cross validation</code></a> (<code>"loo"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_repeated_cv.html"><code>repeated cross validation</code></a> (<code>"repeated_cv"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_bootstrap.html"><code>bootstrapping</code></a> (<code>"bootstrap"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_subsampling.html"><code>subsampling</code></a> (<code>"subsampling"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_holdout.html"><code>holdout</code></a> (<code>"holdout"</code>),</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_insample.html"><code>in-sample resampling</code></a> (<code>"insample"</code>), and</li>
<li>
<a href="https://mlr3.mlr-org.com/reference/mlr_resamplings_custom.html"><code>custom resampling</code></a> (<code>"custom"</code>).</li>
</ul>
<p>In particular, it is often desirable to repeatedly split the entire data in different ways to ensure that a “lucky” or “unlucky” split does not bias the generalization performance estimate.
Without resampling strategies like the ones we provide here, this is a tedious and error-prone process.</p>
<p>The following sections provide guidance on how to select a resampling strategy and how to use it.</p>
<p>Here is a graphical illustration of the resampling process in general:</p>
<div class="inline-figure"><img src="images/ml_abstraction.svg" style="display: block; margin: auto;"></div>
<div id="resampling-settings" class="section level3" number="3.2.1">
<h3>
<span class="header-section-number">3.2.1</span> Settings<a class="anchor" aria-label="anchor" href="#resampling-settings"><i class="fas fa-link"></i></a>
</h3>
<p>We will use the <a href="https://mlr3.mlr-org.com/reference/mlr_tasks_penguins.html"><code>penguins</code></a> task and a simple classification tree from the <a href="https://cran.r-project.org/package=rpart">rpart</a> package as an example here.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3verse.mlr-org.com">"mlr3verse"</a></span><span class="op">)</span>

<span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">tsk</a></span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span>
<span class="va">learner</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span></code></pre></div>
<p>When performing resampling with a dataset, we first need to define which approach should be used.
<a href="https://mlr3.mlr-org.com">mlr3</a> resampling strategies and their parameters can be queried by looking at the <code>data.table</code> output of the <code>mlr_resamplings</code> dictionary; this also lists the parameters that can be changed to affect the behavior of each strategy:</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html">as.data.table</a></span><span class="op">(</span><span class="va">mlr_resamplings</span><span class="op">)</span></code></pre></div>
<pre><code>##            key        params iters
## 1:   bootstrap ratio,repeats    30
## 2:      custom                  NA
## 3:   custom_cv                  NA
## 4:          cv         folds    10
## 5:     holdout         ratio     1
## 6:    insample                   1
## 7:         loo                  NA
## 8: repeated_cv folds,repeats   100
## 9: subsampling ratio,repeats    30</code></pre>
<p>Additional resampling methods for special use cases are available via extension packages, such as <a href="https://github.com/mlr-org/mlr3spatiotemporal">mlr3spatiotemporal</a> for spatial data.</p>
<p>What we showed in the <a href="basics.html#train-predict">train/predict/score</a> part is the equivalent of holdout resampling, done manually, so let’s consider this one first.
We can retrieve elements from the dictionary <a href="https://mlr3.mlr-org.com/reference/mlr_resamplings.html"><code>mlr_resamplings</code></a> via <code>$get()</code> or the convenience function <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>rsmp()</code></a>:</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">resampling</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;ResamplingHoldout&gt; with 1 iterations
## * Instantiated: FALSE
## * Parameters: ratio=0.6667</code></pre>
<p>Note that the <code>$is_instantiated</code> field is set to <code>FALSE</code>.
This means we did not actually apply the strategy to a dataset yet.</p>
<p>By default we get a .66/.33 split of the data into training and test.
There are two ways in which this ratio can be changed:</p>
<ol style="list-style-type: decimal">
<li>Overwriting the slot in <code>$param_set$values</code> using a named list:</li>
</ol>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span><span class="op">$</span><span class="va">param_set</span><span class="op">$</span><span class="va">values</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ratio <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Specifying the resampling parameters directly during construction:</li>
</ol>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span>, ratio <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;ResamplingHoldout&gt; with 1 iterations
## * Instantiated: FALSE
## * Parameters: ratio=0.8</code></pre>
</div>
<div id="resampling-inst" class="section level3" number="3.2.2">
<h3>
<span class="header-section-number">3.2.2</span> Instantiation<a class="anchor" aria-label="anchor" href="#resampling-inst"><i class="fas fa-link"></i></a>
</h3>
<p>So far we have only chosen a resampling strategy; we now need to instantiate it with data.</p>
<p>To actually perform the splitting and obtain indices for the training and the test split, the resampling needs a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>.
By calling the method <code>instantiate()</code>, we split the indices of the data into indices for training and test sets.
These resulting indices are stored in the <a href="https://mlr3.mlr-org.com/reference/Resampling.html"><code>Resampling</code></a> objects.</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span><span class="op">$</span><span class="fu">instantiate</span><span class="op">(</span><span class="va">task</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">resampling</span><span class="op">$</span><span class="fu">train_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  int [1:275] 1 3 4 6 7 8 9 10 11 13 ...</code></pre>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">resampling</span><span class="op">$</span><span class="fu">test_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  int [1:69] 2 5 12 15 17 20 22 28 29 30 ...</code></pre>
<p>Note that if you want to compare multiple <a href="basics.html#learners">Learners</a> in a fair manner, using the same instantiated resampling for each learner is mandatory, such that each learner gets exactly the same training data and the performance of the trained model is evaluated in exactly the same test set.
A way to greatly simplify the comparison of multiple learners is discussed in the <a href="perf-eval-cmp.html#benchmarking">section on benchmarking</a>.</p>
</div>
<div id="resampling-exec" class="section level3" number="3.2.3">
<h3>
<span class="header-section-number">3.2.3</span> Execution<a class="anchor" aria-label="anchor" href="#resampling-exec"><i class="fas fa-link"></i></a>
</h3>
<p>With a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>, a <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a>, and a <a href="https://mlr3.mlr-org.com/reference/Resampling.html"><code>Resampling</code></a> object we can call <a href="https://mlr3.mlr-org.com/reference/resample.html"><code>resample()</code></a>, which fits the learner on the training set and evaluates it on the test set.
This may happen multiple times, depending on the given resampling strategy.
The result of running the <a href="https://mlr3.mlr-org.com/reference/resample.html"><code>resample()</code></a> function is a <a href="https://mlr3.mlr-org.com/reference/ResampleResult.html"><code>ResampleResult</code></a> object.
We can tell <a href="https://mlr3.mlr-org.com/reference/resample.html"><code>resample()</code></a> to keep the fitted models (for example for later inspection) by setting the <code>store_models</code> option to <code>TRUE</code>and then starting the computation:</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">tsk</a></span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span>
<span class="va">learner</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span>, maxdepth <span class="op">=</span> <span class="fl">3</span>, predict_type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span>
<span class="va">resampling</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"cv"</span>, folds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="va">rr</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">learner</span>, <span class="va">resampling</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">rr</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;ResampleResult&gt; of 3 iterations
## * Task: penguins
## * Learner: classif.rpart
## * Warnings: 0 in 0 iterations
## * Errors: 0 in 0 iterations</code></pre>
<p>Here we use a three-fold cross-validation resampling, which trains and evaluates on three different training and test sets.
The returned <a href="https://mlr3.mlr-org.com/reference/ResampleResult.html"><code>ResampleResult</code></a>, stored as <code>rr</code>, provides various getters to access and aggregate the stored information.
Here are a few examples:</p>
<ul>
<li>
<p>Calculate the average performance across all resampling iterations, in terms of classification error:</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## classif.ce 
##    0.06387</code></pre>
</li>
<li>
<p>Extract the performance for the individual resampling iterations:</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="fu">score</span><span class="op">(</span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##                 task  task_id                   learner    learner_id
## 1: &lt;TaskClassif[49]&gt; penguins &lt;LearnerClassifRpart[37]&gt; classif.rpart
## 2: &lt;TaskClassif[49]&gt; penguins &lt;LearnerClassifRpart[37]&gt; classif.rpart
## 3: &lt;TaskClassif[49]&gt; penguins &lt;LearnerClassifRpart[37]&gt; classif.rpart
##            resampling resampling_id iteration              prediction
## 1: &lt;ResamplingCV[19]&gt;            cv         1 &lt;PredictionClassif[20]&gt;
## 2: &lt;ResamplingCV[19]&gt;            cv         2 &lt;PredictionClassif[20]&gt;
## 3: &lt;ResamplingCV[19]&gt;            cv         3 &lt;PredictionClassif[20]&gt;
##    classif.ce
## 1:    0.06957
## 2:    0.08696
## 3:    0.03509</code></pre>
<p>This is useful to check if one (or more) of the iterations are very different from the average.</p>
</li>
<li>
<p>Check for warnings or errors:</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="va">warnings</span></code></pre></div>
<pre><code>## Empty data.table (0 rows and 2 cols): iteration,msg</code></pre>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="va">errors</span></code></pre></div>
<pre><code>## Empty data.table (0 rows and 2 cols): iteration,msg</code></pre>
</li>
<li>
<p>Extract and inspect the resampling splits; this allows to see in detail which observations were used for what purpose when:</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="va">resampling</span></code></pre></div>
<pre><code>## &lt;ResamplingCV&gt; with 3 iterations
## * Instantiated: TRUE
## * Parameters: folds=3</code></pre>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="va">resampling</span><span class="op">$</span><span class="va">iters</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">rr</span><span class="op">$</span><span class="va">resampling</span><span class="op">$</span><span class="fu">test_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  int [1:115] 2 3 12 16 18 22 24 27 28 29 ...</code></pre>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">rr</span><span class="op">$</span><span class="va">resampling</span><span class="op">$</span><span class="fu">train_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  int [1:229] 4 6 7 8 10 11 13 21 30 33 ...</code></pre>
</li>
<li>
<p>Retrieve the model trained in a specific iteration and inspect it, for example to investigate why the performance in this iteration was very different from the average:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lrn</span> <span class="op">=</span> <span class="va">rr</span><span class="op">$</span><span class="va">learners</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="va">lrn</span><span class="op">$</span><span class="va">model</span></code></pre></div>
<pre><code>## n= 229 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
## 1) root 229 123 Adelie (0.462882 0.170306 0.366812)  
##   2) flipper_length&lt; 206.5 141  35 Adelie (0.751773 0.241135 0.007092)  
##     4) bill_length&lt; 44.65 106   3 Adelie (0.971698 0.028302 0.000000) *
##     5) bill_length&gt;=44.65 35   4 Chinstrap (0.085714 0.885714 0.028571) *
##   3) flipper_length&gt;=206.5 88   5 Gentoo (0.000000 0.056818 0.943182)  
##     6) bill_depth&gt;=16.9 8   3 Chinstrap (0.000000 0.625000 0.375000) *
##     7) bill_depth&lt; 16.9 80   0 Gentoo (0.000000 0.000000 1.000000) *</code></pre>
</li>
<li>
<p>Extract the individual predictions:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="fu">prediction</span><span class="op">(</span><span class="op">)</span> <span class="co"># all predictions merged into a single Prediction object</span></code></pre></div>
<pre><code>## &lt;PredictionClassif&gt; for 344 observations:
##     row_ids     truth  response prob.Adelie prob.Chinstrap prob.Gentoo
##           2    Adelie    Adelie      0.9717         0.0283        0.00
##           3    Adelie    Adelie      0.9717         0.0283        0.00
##          12    Adelie    Adelie      0.9717         0.0283        0.00
## ---                                                                   
##         330 Chinstrap Chinstrap      0.0400         0.9400        0.02
##         333 Chinstrap Chinstrap      0.0400         0.9400        0.02
##         337 Chinstrap Chinstrap      0.0400         0.9400        0.02</code></pre>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="fu">predictions</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># predictions of first resampling iteration</span></code></pre></div>
<pre><code>## &lt;PredictionClassif&gt; for 115 observations:
##     row_ids     truth  response prob.Adelie prob.Chinstrap prob.Gentoo
##           2    Adelie    Adelie     0.97170         0.0283     0.00000
##           3    Adelie    Adelie     0.97170         0.0283     0.00000
##          12    Adelie    Adelie     0.97170         0.0283     0.00000
## ---                                                                   
##         336 Chinstrap Chinstrap     0.08571         0.8857     0.02857
##         339 Chinstrap Chinstrap     0.08571         0.8857     0.02857
##         341 Chinstrap    Adelie     0.97170         0.0283     0.00000</code></pre>
</li>
<li>
<p>Filter the result to only keep specified resampling iterations:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rr</span><span class="op">$</span><span class="fu">filter</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">rr</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;ResampleResult&gt; of 2 iterations
## * Task: penguins
## * Learner: classif.rpart
## * Warnings: 0 in 0 iterations
## * Errors: 0 in 0 iterations</code></pre>
</li>
</ul>
</div>
<div id="resamp-custom" class="section level3" number="3.2.4">
<h3>
<span class="header-section-number">3.2.4</span> Custom resampling<a class="anchor" aria-label="anchor" href="#resamp-custom"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes it is necessary to perform resampling with custom splits, e.g. to reproduce results reported in a study.
A manual resampling instance can be created using the <code>"custom"</code> template.</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"custom"</span><span class="op">)</span>
<span class="va">resampling</span><span class="op">$</span><span class="fu">instantiate</span><span class="op">(</span><span class="va">task</span>,
  train <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">51</span><span class="op">:</span><span class="fl">60</span>, <span class="fl">101</span><span class="op">:</span><span class="fl">110</span><span class="op">)</span><span class="op">)</span>,
  test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">11</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">61</span><span class="op">:</span><span class="fl">70</span>, <span class="fl">111</span><span class="op">:</span><span class="fl">120</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">resampling</span><span class="op">$</span><span class="va">iters</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span><span class="op">$</span><span class="fu">train_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1]   1   2   3   4   5   6   7   8   9  10  51  52  53  54  55  56  57  58  59
## [20]  60 101 102 103 104 105 106 107 108 109 110</code></pre>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resampling</span><span class="op">$</span><span class="fu">test_set</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1]  11  12  13  14  15  16  17  18  19  20  61  62  63  64  65  66  67  68  69
## [20]  70 111 112 113 114 115 116 117 118 119 120</code></pre>
</div>
<div id="resampling-with-predefined-groups" class="section level3" number="3.2.5">
<h3>
<span class="header-section-number">3.2.5</span> Resampling with (predefined) groups<a class="anchor" aria-label="anchor" href="#resampling-with-predefined-groups"><i class="fas fa-link"></i></a>
</h3>
<p>In some cases, it is desirable to keep observations together, i.e. to not separate them into training and test set.
This can be defined through the column role <code>"group"</code> during Task creation, i.e. a special column in the data specifies the groups (see also the <a href="https://mlr3.mlr-org.com/reference/Resampling.html#grouping-blocking">help page</a> on this column role).
In <code>mlr</code> this was called “blocking”.
See also the mlr3gallery post on <a href="https://mlr3gallery.mlr-org.com/posts/2020-03-30-stratification-blocking/">this topic</a> for a practical example.</p>
</div>
<div id="autoplot-resampleresult" class="section level3" number="3.2.6">
<h3>
<span class="header-section-number">3.2.6</span> Plotting Resample Results<a class="anchor" aria-label="anchor" href="#autoplot-resampleresult"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://mlr3viz.mlr-org.com">mlr3viz</a> provides a <a href="https://www.rdocumentation.org/packages/ggplot2/topics/autoplot"><code>autoplot()</code></a> method for resampling results.
As an example, we create a binary classification task with two features, perform a resampling with a 10-fold cross-validation and visualize the results:</p>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">tsk</a></span><span class="op">(</span><span class="st">"pima"</span><span class="op">)</span>
<span class="va">task</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"glucose"</span>, <span class="st">"mass"</span><span class="op">)</span><span class="op">)</span>
<span class="va">learner</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span>, predict_type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span>
<span class="va">rr</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">learner</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"cv"</span><span class="op">)</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># boxplot of AUC values across the 10 folds</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">rr</span>, measure <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.auc"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-resampling_files/figure-html/02-basics-resampling-017-1.svg" width="672" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ROC curve, averaged over 10 folds</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">rr</span>, type <span class="op">=</span> <span class="st">"roc"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-resampling_files/figure-html/02-basics-resampling-017-2.svg" width="672" style="display: block; margin: auto;"></div>
<p>We can also plot the predictions of individual models:</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># learner predictions for the first fold</span>
<span class="va">rr</span><span class="op">$</span><span class="fu">filter</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">rr</span>, type <span class="op">=</span> <span class="st">"prediction"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<div class="inline-figure"><img src="03-perf-resampling_files/figure-html/02-basics-resampling-017-1-1.svg" width="672" style="display: block; margin: auto;"></div>
<p>All available plot types are listed on the manual page of <a href="https://mlr3viz.mlr-org.com/reference/autoplot.ResampleResult.html"><code>autoplot.ResampleResult()</code></a>.</p>

</div>
</div>
<div id="benchmarking" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Benchmarking<a class="anchor" aria-label="anchor" href="#benchmarking"><i class="fas fa-link"></i></a>
</h2>
<p>Comparing the performance of different learners on multiple tasks and/or different resampling schemes is a common task.
This operation is usually referred to as “benchmarking” in the field of machine learning.
The <a href="https://mlr3.mlr-org.com">mlr3</a> package offers the <a href="https://mlr3.mlr-org.com/reference/benchmark.html"><code>benchmark()</code></a> convenience function that takes care of most of the work of repeatedly training and evaluating models under the same conditions.</p>
<div id="bm-design" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Design Creation<a class="anchor" aria-label="anchor" href="#bm-design"><i class="fas fa-link"></i></a>
</h3>
<p>Benchmark experiments in <code>mlr3</code> are specified through a design.
Such a design is essentially a table of scenarios to be evaluated; in particular unique combinations of <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>, <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a> and <a href="https://mlr3.mlr-org.com/reference/Resampling.html"><code>Resampling</code></a> triplets.</p>
<p>We use the <a href="https://mlr3.mlr-org.com/reference/benchmark_grid.html"><code>benchmark_grid()</code></a> function to create an exhaustive design (that evaluates each learner on each task with each resampling) and instantiate the resampling properly, so that all learners are executed on the same train/test split for each tasks.
We set the learners to predict probabilities and also tell them to predict for the observations of the training set (by setting <code>predict_sets</code> to <code>c("train", "test")</code>).
Additionally, we use <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>tsks()</code></a>, <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>lrns()</code></a>, and <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>rsmps()</code></a> to retrieve lists of <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>, <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a> and <a href="https://mlr3.mlr-org.com/reference/Resampling.html"><code>Resampling</code></a> in the same fashion as <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>tsk()</code></a>, <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>lrn()</code></a> and <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>rsmp()</code></a>.</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3verse.mlr-org.com">"mlr3verse"</a></span><span class="op">)</span>

<span class="va">design</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/benchmark_grid.html">benchmark_grid</a></span><span class="op">(</span>
  tasks <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">tsks</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"spam"</span>, <span class="st">"german_credit"</span>, <span class="st">"sonar"</span><span class="op">)</span><span class="op">)</span>,
  learners <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrns</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"classif.ranger"</span>, <span class="st">"classif.rpart"</span>, <span class="st">"classif.featureless"</span><span class="op">)</span>,
    predict_type <span class="op">=</span> <span class="st">"prob"</span>, predict_sets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"train"</span>, <span class="st">"test"</span><span class="op">)</span><span class="op">)</span>,
  resamplings <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmps</a></span><span class="op">(</span><span class="st">"cv"</span>, folds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></code></pre></div>
<pre><code>##                 task                         learner         resampling
## 1: &lt;TaskClassif[49]&gt;      &lt;LearnerClassifRanger[37]&gt; &lt;ResamplingCV[19]&gt;
## 2: &lt;TaskClassif[49]&gt;       &lt;LearnerClassifRpart[37]&gt; &lt;ResamplingCV[19]&gt;
## 3: &lt;TaskClassif[49]&gt; &lt;LearnerClassifFeatureless[37]&gt; &lt;ResamplingCV[19]&gt;
## 4: &lt;TaskClassif[49]&gt;      &lt;LearnerClassifRanger[37]&gt; &lt;ResamplingCV[19]&gt;
## 5: &lt;TaskClassif[49]&gt;       &lt;LearnerClassifRpart[37]&gt; &lt;ResamplingCV[19]&gt;
## 6: &lt;TaskClassif[49]&gt; &lt;LearnerClassifFeatureless[37]&gt; &lt;ResamplingCV[19]&gt;
## 7: &lt;TaskClassif[49]&gt;      &lt;LearnerClassifRanger[37]&gt; &lt;ResamplingCV[19]&gt;
## 8: &lt;TaskClassif[49]&gt;       &lt;LearnerClassifRpart[37]&gt; &lt;ResamplingCV[19]&gt;
## 9: &lt;TaskClassif[49]&gt; &lt;LearnerClassifFeatureless[37]&gt; &lt;ResamplingCV[19]&gt;</code></pre>
<p>The created <code>design</code> can be passed to <a href="https://mlr3.mlr-org.com/reference/benchmark.html"><code>benchmark()</code></a> to start the computation.
It is also possible to create a custom design manually, for example to exclude certain task-learner combinations.
However, if you create a custom task with <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table()</a></code>, the train/test splits will be different for each row of the design if you do not <a href="perf-eval-cmp.html#resampling-inst"><strong>manually instantiate</strong></a> the resampling before creating the design.
See the help page on <a href="https://mlr3.mlr-org.com/reference/benchmark_grid.html"><code>benchmark_grid()</code></a> for an example.</p>
</div>
<div id="bm-exec" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Execution and Aggregation of Results<a class="anchor" aria-label="anchor" href="#bm-exec"><i class="fas fa-link"></i></a>
</h3>
<p>After the <a href="perf-eval-cmp.html#bm-design">benchmark design</a> is ready, we can call <a href="https://mlr3.mlr-org.com/reference/benchmark.html"><code>benchmark()</code></a> on it:</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmr</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/benchmark.html">benchmark</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></code></pre></div>
<p>Note that we did not have to instantiate the resampling manually.
<a href="https://mlr3.mlr-org.com/reference/benchmark_grid.html"><code>benchmark_grid()</code></a> took care of it for us: each resampling strategy is instantiated once for each task during the construction of the exhaustive grid.</p>
<p>Once the benchmarking is done (and, depending on the size of your design, this can take quite some time), we can aggregate the performance with <code>$aggregate()</code>.
We create two measures to calculate the area under the curve (AUC) for the training and the test set:</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">measures</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.auc"</span>, predict_sets <span class="op">=</span> <span class="st">"train"</span>, id <span class="op">=</span> <span class="st">"auc_train"</span><span class="op">)</span>,
  <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.auc"</span>, id <span class="op">=</span> <span class="st">"auc_test"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">tab</span> <span class="op">=</span> <span class="va">bmr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="va">measures</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></code></pre></div>
<pre><code>##    nr      resample_result       task_id          learner_id resampling_id
## 1:  1 &lt;ResampleResult[22]&gt;          spam      classif.ranger            cv
## 2:  2 &lt;ResampleResult[22]&gt;          spam       classif.rpart            cv
## 3:  3 &lt;ResampleResult[22]&gt;          spam classif.featureless            cv
## 4:  4 &lt;ResampleResult[22]&gt; german_credit      classif.ranger            cv
## 5:  5 &lt;ResampleResult[22]&gt; german_credit       classif.rpart            cv
## 6:  6 &lt;ResampleResult[22]&gt; german_credit classif.featureless            cv
## 7:  7 &lt;ResampleResult[22]&gt;         sonar      classif.ranger            cv
## 8:  8 &lt;ResampleResult[22]&gt;         sonar       classif.rpart            cv
## 9:  9 &lt;ResampleResult[22]&gt;         sonar classif.featureless            cv
##    iters auc_train auc_test
## 1:     3    0.9995   0.9838
## 2:     3    0.9204   0.9095
## 3:     3    0.5000   0.5000
## 4:     3    0.9985   0.7939
## 5:     3    0.8196   0.7130
## 6:     3    0.5000   0.5000
## 7:     3    1.0000   0.9138
## 8:     3    0.9339   0.8062
## 9:     3    0.5000   0.5000</code></pre>
<p>We can aggregate the results even further.
For example, we might be interested to know which learner performed best across all tasks.
Simply aggregating the performances with the mean is usually not statistically sound.
Instead, we calculate the rank statistic for each learner, grouped by task.
Then the calculated ranks, grouped by learner, are aggregated with the <a href="https://cran.r-project.org/package=data.table">data.table</a> package.
As larger AUC scores are better, we multiply the values by <span class="math inline">\(-1\)</span> such that the best learner has a rank of <span class="math inline">\(1\)</span>.</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com">"data.table"</a></span><span class="op">)</span>
<span class="co"># group by levels of task_id, return columns:</span>
<span class="co"># - learner_id</span>
<span class="co"># - rank of col '-auc_train' (per level of learner_id)</span>
<span class="co"># - rank of col '-auc_test' (per level of learner_id)</span>
<span class="va">ranks</span> <span class="op">=</span> <span class="va">tab</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">learner_id</span>, rank_train <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/frank.html">rank</a></span><span class="op">(</span><span class="op">-</span><span class="va">auc_train</span><span class="op">)</span>, rank_test <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/frank.html">rank</a></span><span class="op">(</span><span class="op">-</span><span class="va">auc_test</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">task_id</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ranks</span><span class="op">)</span></code></pre></div>
<pre><code>##          task_id          learner_id rank_train rank_test
## 1:          spam      classif.ranger          1         1
## 2:          spam       classif.rpart          2         2
## 3:          spam classif.featureless          3         3
## 4: german_credit      classif.ranger          1         1
## 5: german_credit       classif.rpart          2         2
## 6: german_credit classif.featureless          3         3
## 7:         sonar      classif.ranger          1         1
## 8:         sonar       classif.rpart          2         2
## 9:         sonar classif.featureless          3         3</code></pre>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># group by levels of learner_id, return columns:</span>
<span class="co"># - mean rank of col 'rank_train' (per level of learner_id)</span>
<span class="co"># - mean rank of col 'rank_test' (per level of learner_id)</span>
<span class="va">ranks</span> <span class="op">=</span> <span class="va">ranks</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>mrank_train <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">rank_train</span><span class="op">)</span>, mrank_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">rank_test</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">learner_id</span><span class="op">]</span>

<span class="co"># print the final table, ordered by mean rank of AUC test</span>
<span class="va">ranks</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">mrank_test</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>##             learner_id mrank_train mrank_test
## 1:      classif.ranger           1          1
## 2:       classif.rpart           2          2
## 3: classif.featureless           3          3</code></pre>
<p>Unsurprisingly, the featureless learner is worse overall.
The winner is the classification forest, which outperforms a single classification tree.</p>
</div>
<div id="autoplot-benchmarkresult" class="section level3" number="3.3.3">
<h3>
<span class="header-section-number">3.3.3</span> Plotting Benchmark Results<a class="anchor" aria-label="anchor" href="#autoplot-benchmarkresult"><i class="fas fa-link"></i></a>
</h3>
<p>Similar to <a href="basics.html#autoplot-task">tasks</a>, <a href="basics.html#autoplot-prediction">predictions</a>, or <a href="perf-eval-cmp.html#autoplot-resampleresult">resample results</a>, <a href="https://mlr3viz.mlr-org.com">mlr3viz</a> also provides a <a href="https://www.rdocumentation.org/packages/ggplot2/topics/autoplot"><code>autoplot()</code></a> method for benchmark results.</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">bmr</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-benchmarking_files/figure-html/02-basics-benchmarking-005-1.svg" width="672" style="display: block; margin: auto;"></div>
<p>Such a plot gives a nice overview of the overall performance and how learners compare on different tasks in an intuitive way.</p>
<p>We can also plot ROC (receiver operating characteristics) curves.
We filter the <a href="https://mlr3.mlr-org.com/reference/BenchmarkResult.html"><code>BenchmarkResult</code></a> to only contain a single <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>, then we simply plot the result:</p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmr_small</span> <span class="op">=</span> <span class="va">bmr</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">filter</span><span class="op">(</span>task_id <span class="op">=</span> <span class="st">"german_credit"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">bmr_small</span>, type <span class="op">=</span> <span class="st">"roc"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-perf-benchmarking_files/figure-html/02-basics-benchmarking-006-1.svg" width="672" style="display: block; margin: auto;"></div>
<p>All available plot types are listed on the manual page of <a href="https://mlr3viz.mlr-org.com/reference/autoplot.BenchmarkResult.html"><code>autoplot.BenchmarkResult()</code></a>.</p>
</div>
<div id="bm-resamp" class="section level3" number="3.3.4">
<h3>
<span class="header-section-number">3.3.4</span> Extracting ResampleResults<a class="anchor" aria-label="anchor" href="#bm-resamp"><i class="fas fa-link"></i></a>
</h3>
<p>A <a href="https://mlr3.mlr-org.com/reference/BenchmarkResult.html"><code>BenchmarkResult</code></a> object is essentially a collection of multiple <a href="https://mlr3.mlr-org.com/reference/ResampleResult.html"><code>ResampleResult</code></a> objects.
As these are stored in a column of the aggregated <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table()</a></code>, we can easily extract them:</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tab</span> <span class="op">=</span> <span class="va">bmr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="va">measures</span><span class="op">)</span>
<span class="va">rr</span> <span class="op">=</span> <span class="va">tab</span><span class="op">[</span><span class="va">task_id</span> <span class="op">==</span> <span class="st">"german_credit"</span> <span class="op">&amp;</span> <span class="va">learner_id</span> <span class="op">==</span> <span class="st">"classif.ranger"</span><span class="op">]</span><span class="op">$</span><span class="va">resample_result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">rr</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;ResampleResult&gt; of 3 iterations
## * Task: german_credit
## * Learner: classif.ranger
## * Warnings: 0 in 0 iterations
## * Errors: 0 in 0 iterations</code></pre>
<p>We can now investigate this resampling and even single resampling iterations using one of the approaches shown in <a href="perf-eval-cmp.html#resampling">the previous section</a>:</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">measure</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">msr</a></span><span class="op">(</span><span class="st">"classif.auc"</span><span class="op">)</span>
<span class="va">rr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="va">measure</span><span class="op">)</span></code></pre></div>
<pre><code>## classif.auc 
##      0.7939</code></pre>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the iteration with worst AUC</span>
<span class="va">perf</span> <span class="op">=</span> <span class="va">rr</span><span class="op">$</span><span class="fu">score</span><span class="op">(</span><span class="va">measure</span><span class="op">)</span>
<span class="va">i</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">perf</span><span class="op">$</span><span class="va">classif.auc</span><span class="op">)</span>

<span class="co"># get the corresponding learner and training set</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">rr</span><span class="op">$</span><span class="va">learners</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;LearnerClassifRanger:classif.ranger&gt;
## * Model: -
## * Parameters: num.threads=1
## * Packages: mlr3, mlr3learners, ranger
## * Predict Type: prob
## * Feature types: logical, integer, numeric, character, factor, ordered
## * Properties: hotstart_backward, importance, multiclass, oob_error,
##   twoclass, weights</code></pre>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">rr</span><span class="op">$</span><span class="va">resampling</span><span class="op">$</span><span class="fu">train_set</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]  2  8  9 14 27 29</code></pre>
</div>
<div id="converting-and-merging" class="section level3" number="3.3.5">
<h3>
<span class="header-section-number">3.3.5</span> Converting and Merging<a class="anchor" aria-label="anchor" href="#converting-and-merging"><i class="fas fa-link"></i></a>
</h3>
<p>A <a href="https://mlr3.mlr-org.com/reference/ResampleResult.html"><code>ResampleResult</code></a> can be converted to a <a href="https://mlr3.mlr-org.com/reference/BenchmarkResult.html"><code>BenchmarkResult</code></a> with the function <a href="https://mlr3.mlr-org.com/reference/as_benchmark_result.html"><code>as_benchmark_result()</code></a>.
We can also merge two <a href="https://mlr3.mlr-org.com/reference/BenchmarkResult.html"><code>BenchmarkResults</code></a> into a larger result object, for example for two related benchmarks that were done on different machines.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">tsk</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span>
<span class="va">resampling</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span><span class="op">$</span><span class="fu">instantiate</span><span class="op">(</span><span class="va">task</span><span class="op">)</span>

<span class="va">rr1</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span>, <span class="va">resampling</span><span class="op">)</span>
<span class="va">rr2</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html">lrn</a></span><span class="op">(</span><span class="st">"classif.featureless"</span><span class="op">)</span>, <span class="va">resampling</span><span class="op">)</span>

<span class="co"># Cast both ResampleResults to BenchmarkResults</span>
<span class="va">bmr1</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/as_benchmark_result.html">as_benchmark_result</a></span><span class="op">(</span><span class="va">rr1</span><span class="op">)</span>
<span class="va">bmr2</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/as_benchmark_result.html">as_benchmark_result</a></span><span class="op">(</span><span class="va">rr2</span><span class="op">)</span>

<span class="co"># Merge 2nd BMR into the first BMR</span>
<span class="va">bmr1</span><span class="op">$</span><span class="fu">combine</span><span class="op">(</span><span class="va">bmr2</span><span class="op">)</span>

<span class="va">bmr1</span></code></pre></div>
<pre><code>## &lt;BenchmarkResult&gt; of 2 rows with 2 resampling runs
##  nr task_id          learner_id resampling_id iters warnings errors
##   1    iris       classif.rpart       holdout     1        0      0
##   2    iris classif.featureless       holdout     1        0      0</code></pre>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="basics.html"><span class="header-section-number">2</span> Basics</a></div>
<div class="next"><a href="optimization.html"><span class="header-section-number">4</span> Model Optimization</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#perf-eval-cmp"><span class="header-section-number">3</span> Performance Evaluation and Comparison</a></li>
<li><a class="nav-link" href="#binary-roc"><span class="header-section-number">3.1</span> ROC Curve and Thresholds</a></li>
<li>
<a class="nav-link" href="#resampling"><span class="header-section-number">3.2</span> Resampling</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#resampling-settings"><span class="header-section-number">3.2.1</span> Settings</a></li>
<li><a class="nav-link" href="#resampling-inst"><span class="header-section-number">3.2.2</span> Instantiation</a></li>
<li><a class="nav-link" href="#resampling-exec"><span class="header-section-number">3.2.3</span> Execution</a></li>
<li><a class="nav-link" href="#resamp-custom"><span class="header-section-number">3.2.4</span> Custom resampling</a></li>
<li><a class="nav-link" href="#resampling-with-predefined-groups"><span class="header-section-number">3.2.5</span> Resampling with (predefined) groups</a></li>
<li><a class="nav-link" href="#autoplot-resampleresult"><span class="header-section-number">3.2.6</span> Plotting Resample Results</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#benchmarking"><span class="header-section-number">3.3</span> Benchmarking</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#bm-design"><span class="header-section-number">3.3.1</span> Design Creation</a></li>
<li><a class="nav-link" href="#bm-exec"><span class="header-section-number">3.3.2</span> Execution and Aggregation of Results</a></li>
<li><a class="nav-link" href="#autoplot-benchmarkresult"><span class="header-section-number">3.3.3</span> Plotting Benchmark Results</a></li>
<li><a class="nav-link" href="#bm-resamp"><span class="header-section-number">3.3.4</span> Extracting ResampleResults</a></li>
<li><a class="nav-link" href="#converting-and-merging"><span class="header-section-number">3.3.5</span> Converting and Merging</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/mlr-org/mlr3book/blob/main/bookdown/03-perf.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/mlr-org/mlr3book/edit/main/bookdown/03-perf.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>mlr3 book</strong>" was written by Marc Becker, Martin Binder, Bernd Bischl, Lars Kotthoff, Michel Lang, Florian Pfisterer, Nicholas G. Reich, Jakob Richter, Patrick Schratz, Raphael Sonabend, Damir Pulatov. It was last built on 2021-11-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
